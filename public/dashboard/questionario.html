<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verdão Fórum | Questionário</title>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="icon" href="../assets/imgs/escudo_palmeiras.png">
</head>

<body>
    <!-- cabeçalho -->
    <header>
        <div class="header-logo">
            <img src="../assets/imgs/verdão__2_-removebg-preview.png" alt="logo-verdao-forum">
        </div>
        <div class="header-paginas">
            <a href="questionario.html">
                <p>Questionário</p>
                <hr>
            </a>
            <img src="../assets/icon/Line 1.png" alt="">
            <a href="dashboard.html">
                <p>Dashboard</p>
            </a>
        </div>
        <a href="../index.html"><img src="../assets/icon/icon_sair.png" alt=""></a>
    </header>


    <!-- Fim do cabeçalho -->
    <div class="div_centralizar_pergunta">
        <div class="div_pergunta_jogador">
            <label for="select_jogador">
                <h2>Qual o seu jogador favorito?</h2>
            </label>
            <select id="select_jogador">
                <option value="Marcelo Lomba">Marcelo Lomba</option>
                <option value="Weverton">Weverton</option>
                <option value="Murilo">Murilo</option>
                <option value="Naves">Naves</option>
                <option value="Gustavo Gómez">Gustavo Gómez</option>
                <option value="Bruno Fuchs">Bruno Fuchs</option>
                <option value="Micael">Micael</option>
                <option value="Vanderlan">Vanderlan</option>
                <option value="Marcos Rocha">Marcos Rocha</option>
                <option value="Mayke">Mayke</option>
                <option value="Piquerez">Piquerez</option>
                <option value="Lucas Evangelista">Lucas Evangelista</option>
                <option value="Maurício">Maurício</option>
                <option value="Facundo Torres">Facundo Torres</option>
                <option value="Emi Martinez">Emi Martinez</option>
                <option value="Richard Ríos">Richard Ríos</option>
                <option value="Aníbal Moreno">Aníbal Moreno</option>
                <option value="Giay">Giay</option>
                <option value="Felipe Anderson">Felipe Anderson</option>
                <option value="Raphael Veiga">Raphael Veiga</option>
                <option value="Luighi">Luighi</option>
                <option value="Estevão">Estevão</option>
                <option value="Bruno Rodrigues">Bruno Rodrigues</option>
                <option value="Allan">Allan</option>
                <option value="Flaco López">Flaco López</option>
                <option value="Vitor Roque">Vitor Roque</option>
                <option value="Benedetti">Benedetti</option>
            </select>
        </div>
    </div>


    <div class="div_centralizar_pergunta">
        <div class="div_pergunta_camiseta">
            <label>
                <h2>Selecione sua camiseta favorita:</h2>
            </label>

            <form id="form_camisetas">
                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2025_1.png" alt="">
                    <p>Temporada 2025<br>
                        Uniforme 1</p>
                    <input type="radio" name="camiseta" value="camiseta_2025_1">
                </label>

                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2025_2.png" alt="">
                    <p>
                    <p>Temporada 2025<br>
                        Uniforme 2</p>
                    </p>
                    <input type="radio" name="camiseta" value="camiseta_2025_2">
                    <br>
                </label>

                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2024_1.png" alt="">
                    <p>Temporada 2024<br>
                        Uniforme 1</p>
                    <input type="radio" name="camiseta" value="camiseta_2024_1">
                    <br>
                </label>

                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2024_2.png" alt="">
                    <p>Temporada 2024<br>
                        Uniforme 2</p>
                    <input type="radio" name="camiseta" value="camiseta_2024_2">
                </label>

                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2023_1.png" alt="">
                    <p>Temporada 2023<br>
                        Uniforme 1</p>
                    <input type="radio" name="camiseta" value="camiseta_2023_1">
                </label>

                <label id="div_camiseta">
                    <img src="../assets/imgs/camiseta2023_2.png" alt="">
                    <p>Temporada 2023<br>
                        Uniforme 2</p>
                    <input type="radio" name="camiseta" value="camiseta_2023_2">
                    </dlabel>
            </form>
        </div>
    </div>

    <div class="div_formacao">
        <img src="../assets/imgs/formacoes_futebol.jpg" alt="">
        <label for="select_formacao">
            <h2>Escolha sua formação favorita: </h2>
        </label>
        <select id="select_formacao">
            <option value="4-4-2">4-4-2</option>
            <option value="4-1-2-1-2">4-1-2-1-2</option>
            <option value="4-3-3">4-3-3</option>
            <option value="4-5-1">4-5-1</option>
            <option value="4-3-2-1">4-3-2-1</option>
            <option value="4-2-3-1">4-2-3-1</option>
            <option value="5-3-2">5-3-2</option>
            <option value="5-4-1">5-4-1</option>
            <option value="4-1-3-2">4-1-3-2</option>
            <option value="3-5-2">3-5-2</option>
        </select>
    </div>

    <div class="div_centralizar_pergunta">
        <div class="div_pergunta_idolo">
            <label>
                <h2>Selecione seu ídolo favorito:</h2>
            </label>
            <form id="form_idolo">
                <label id="div_idolo_ademir">
                    <div class="div_input_idolo">
                        <h3>Ademir da Guia</h3>
                        <input type="radio" name="idolo" value="Ademir da guia">
                    </div>
                </label>

                <label id="div_idolo_alex">
                    <div class="div_input_idolo">
                        <h3>Alex</h3>
                        <input type="radio" name="idolo" value="Alex">
                    </div>
                </label>

                <label id="div_idolo_dudu">
                    <div class="div_input_idolo">
                        <h3>Dudu</h3>
                        <input type="radio" name="idolo" value="Dudu">
                    </div>
                </label>

                <label id="div_idolo_edmundo">
                    <div class="div_input_idolo">
                        <h3>Edmundo</h3>
                        <input type="radio" name="idolo" value="Edmundo">
                    </div>
                </label>

                <label id="div_idolo_evair">
                    <div class="div_input_idolo">
                        <h3>Evair</h3>
                        <input type="radio" name="idolo" value="Evair">
                    </div>
                </label>

                <label id="div_idolo_marcos">
                    <div class="div_input_idolo">
                        <h3>Marcos</h3>
                        <input type="radio" name="idolo" value="Marcos">
                    </div>
                </label>

                <label id="div_idolo_veiga">
                    <div class="div_input_idolo">
                        <h3>Raphael Veiga</h3>
                        <input type="radio" name="idolo" value="Raphael Veiga">
                    </div>
                </label>
            </form>
        </div>
    </div>

    <div class="div_botao">
        <button onclick="inserir()">inserir</button>
    </div>
</body>
<script>
    function inserir() {

        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fetch logo abaixo
        var jogadorVar = select_jogador.value;
        var camisetaVar = "";
        var formacaoVar = select_formacao.value;
        var idoloVar = "";
        var usuarioVar = sessionStorage.ID_USUARIO;

        var radiosCamiseta = document.getElementsByName("camiseta");
        var radiosIdolo = document.getElementsByName("idolo");

        for (var i = 0; i < radiosCamiseta.length; i++) {
            if (radiosCamiseta[i].checked) {
                camisetaVar = radiosCamiseta[i].value;
                break;
            }
        }

        for (var i = 0; i < radiosIdolo.length; i++) {
            if (radiosIdolo[i].checked) {
                idoloVar = radiosIdolo[i].value;
                break;
            }
        }

        // Verificando se há algum campo em branco
        if (
            jogadorVar == "" ||
            camisetaVar == "" ||
            formacaoVar == "" ||
            idoloVar == ""
        ) {

            alert("Preencha os campos! Não deixe eles em branco")
            return false;
        }

        console.log("Enviando:", {
            jogadorServer: jogadorVar,
            camisetaServer: camisetaVar,
            formacaoServer: formacaoVar,
            idoloServer: idoloVar,
            usuarioServer: usuarioVar
        });


        // Enviando o valor da nova input
        fetch("/questionario/inserir", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                usuarioServer: usuarioVar,
                jogadorServer: jogadorVar,
                camisetaServer: camisetaVar,
                formacaoServer: formacaoVar,
                idoloServer: idoloVar
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {

                    alert("O questionário foi respondido com sucesso, agora você será redirecionado para a dashboard!")

                    setTimeout(() => {
                        window.location = "dashboard.html";
                    }, "2500");

                } else {
                    throw "Houve um erro ao tentar responder o questionário";
                }
            })
        return false;
    }
</script>

</html>